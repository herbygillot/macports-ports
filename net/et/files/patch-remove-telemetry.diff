--- ./src/terminal/TelemetryService.cpp.orig	2021-12-28 08:15:47.000000000 -0500
+++ ./src/terminal/TelemetryService.cpp	2021-12-28 08:18:06.000000000 -0500
@@ -91,158 +91,11 @@
       logHttpClient(new httplib::Client(
           "https://browser-http-intake.logs.datadoghq.com")),
       shuttingDown(false) {
-#ifdef NO_TELEMETRY
   allowed = false;
   return;
-#else
-  char* disableTelementry = ::getenv("ET_NO_TELEMETRY");
-  if (disableTelementry) {
-    allowed = false;
-  }
-  if (allowed) {
-    auto telemetryConfigPath = sago::getConfigHome() + "/et/telemetry.ini";
-    telemetryId = sole::uuid4();
-    if (fs::exists(telemetryConfigPath)) {
-      // Load the config file
-      CSimpleIniA ini(true, false, false);
-      SI_Error rc = ini.LoadFile(telemetryConfigPath.c_str());
-      if (rc == 0) {
-        const char* telemetryIdString = ini.GetValue("Sentry", "Id", NULL);
-        if (telemetryIdString) {
-          telemetryId = sole::rebuild(telemetryIdString);
-        } else {
-          STFATAL << "Invalid telemetry config";
-        }
-      } else {
-        STFATAL << "Invalid config file: " << telemetryConfigPath;
-      }
-    } else {
-      // Ensure directory exists
-      fs::create_directories(sago::getConfigHome() + "/et");
-
-      // Create ini
-      CSimpleIniA ini(true, false, false);
-      ini.SetValue("Sentry", "Id", telemetryId.str().c_str());
-      ini.SaveFile(telemetryConfigPath.c_str());
-
-      // Let user know about telemetry
-      CLOG(INFO, "stdout")
-          << "Eternal Terminal collects crashes and errors in order to help us "
-             "improve your experience.\nThe data collected is anonymous.\nYou "
-             "can opt-out of telemetry by setting the environment variable "
-             "ET_NO_TELEMETRY to any non-empty value."
-          << endl;
-    }
-
-#ifdef USE_SENTRY
-    sentry_options_t* options = sentry_options_new();
-    logHttpClient->set_compress(true);
-
-    // this is an example. for real usage, make sure to set this explicitly to
-    // an app specific cache location.
-    sentry_options_set_database_path(options, databasePath.c_str());
-    sentry_options_set_dsn(
-        options,
-        "https://51ec60d489224f1da2b63c912a5c7fad@o496602.ingest.sentry.io/"
-        "5574732");
-    sentry_options_set_symbolize_stacktraces(options, true);
-    sentry_options_set_release(options, "EternalTerminal@" ET_VERSION);
-    sentry_options_set_environment(options, environment.c_str());
-
-    sentry_init(options);
-
-    auto sentryShutdownHandler = [](int i) { shutdownTelemetry(); };
-    sentry_value_t user = sentry_value_new_object();
-    sentry_value_set_by_key(user, "id",
-                            sentry_value_new_string(telemetryId.str().c_str()));
-    sentry_set_user(user);
-
-    vector<int> signalsToCatch = {
-#ifdef SIGINT
-        SIGINT,
-#endif
-#ifdef SIGILL
-        SIGILL,
-#endif
-#ifdef SIGABRT
-        SIGABRT,
-#endif
-#ifdef SIGFPE
-        SIGFPE,
-#endif
-#ifdef SIGSEGV
-        SIGSEGV,
-#endif
-#ifdef SIGTERM
-        SIGTERM,
-#endif
-#ifdef SIGKILL
-        SIGKILL,
-#endif
-    };
-    for (auto it : signalsToCatch) {
-      signal(it, sentryShutdownHandler);
-    }
-#endif
-    atexit([] { shutdownTelemetry(); });
-
-    el::Helpers::installLogDispatchCallback<TelemetryDispatcher>(
-        "TelemetryDispatcher");
-    auto* dispatcher = el::Helpers::logDispatchCallback<TelemetryDispatcher>(
-        "TelemetryDispatcher");
-
-    dispatcher->setEnabled(true);
-
-    logSendingThread.reset(new thread([this]() {
-      auto nextDumpTime = std::chrono::system_clock::now();
-      while (true) {
-        bool lastRun = shuttingDown;
-        string payload;
-        int logBufferSize;
-        {
-          lock_guard<recursive_mutex> guard(logMutex);
-          logBufferSize = (int)logBuffer.size();
-        }
-        if (logBufferSize) {
-          if (logBufferSize >= 1024 ||
-              nextDumpTime < std::chrono::system_clock::now() || lastRun) {
-            nextDumpTime =
-                std::chrono::system_clock::now() + chrono::seconds(30);
-            {
-              lock_guard<recursive_mutex> guard(logMutex);
-              payload = json(logBuffer).dump(4);
-              logBuffer.clear();
-            }
-            httplib::Headers headers;
-            headers.emplace("DD-API-KEY", "e5e757f30a9e567f95b16b7673b09253");
-
-            logHttpClient->set_connection_timeout(0,
-                                                  300000);  // 300 milliseconds
-            logHttpClient->set_read_timeout(1, 0);          // 1 second
-            logHttpClient->set_write_timeout(1, 0);         // 1 second
-
-            logHttpClient->Post(
-                "/v1/input/"
-                "pubfe47c2f8dfb3e8c26eb66ba4a456ec79?ddsource=browser&ddtags="
-                "sdk_version:2.1.1",
-                headers, payload, "application/json");
-          }
-        }
-        this_thread::sleep_for(chrono::milliseconds(100));
-        if (lastRun) {
-          this_thread::sleep_for(chrono::milliseconds(400));
-          break;
-        }
-      }
-    }));
-  }
-#endif
 }
 
 TelemetryService::~TelemetryService() {
-  if (!shuttingDown) {
-    cerr << "Destroyed telemetryService without a shutdown";
-  }
 }
 
 void TelemetryService::logToSentry(el::Level level, const string& message) {
